# Time-stamp: <2019-08-09 12:52:27 eu>
* Sync
[[elisp:(eu-process "ssm-report ./sy" "./sy" t)][./sy]]
[[elisp:(eu-process "ssm-report ./rr" "./rr" t)][./rr]]

* Upon init
ssm-report update-merges :: 7m
ssm-report h1-overlay
ssm-report stat geo

* Make trees
** copy trees
d=2019-0121
for f in h1 h3 bv by; do rsync albertine:/syn/eu/ac/results/signature-pages/$d/$f/tree.json.xz tree/$f.tree.json.xz; done
** make trees
[[elisp:(eu-process "ssm-report h1-tree-i" "ssm-report h1-tree-i")][h1-tree-i]]
[[elisp:(eu-process "ssm-report h3-tree-i" "ssm-report h3-tree-i")][h3-tree-i]]
[[elisp:(eu-process "ssm-report bv-tree-i" "ssm-report bv-tree-i")][bvic-tree-i]]
[[elisp:(eu-process "ssm-report by-tree-i" "ssm-report by-tree-i")][byam-tree-i]]

eo ssm-report h1-tree-aa
eo ssm-report h3-tree-aa
eo ssm-report by-tree-aa
eo ssm-report bv-tree-aa

* Settings
[[file:h1-geographic.json][h1-geographic.json]] [[file:h1-hi.json][h1-hi.json]] [[file:serology.h1-hi.json][serology.h1-hi.json]] [[file:vaccines.h1-hi.json][vaccines.h1-hi.json]]
[[file:h3-geographic.json][h3-geographic.json]] [[file:h3-hi.json][h3-hi.json]] [[file:serology.h3-hi.json][serology.h3-hi.json]] [[file:vaccines.h3-hi.json][vaccines.h3-hi.json]]
[[file:h3-neut.json][h3-neut.json]] [[file:serology.h3-neut.json][serology.h3-neut.json]] [[file:vaccines.h3-neut.json][vaccines.h3-neut.json]]
[[file:b-geographic.json][b-geographic.json]]
[[file:bv-hi.json][bv-hi.json]] [[file:serology.bv-hi.json][serology.bv-hi.json]] [[file:vaccines.bv-hi.json][vaccines.bv-hi.json]]
[[file:by-hi.json][by-hi.json]] [[file:serology.by-hi.json][serology.by-hi.json]] [[file:vaccines.by-hi.json][vaccines.by-hi.json]]
[[file:report.json][report.json]] [[file:report-serumcoverage.json][report-serumcoverage.json]]

* Make maps
[[elisp:(eu-process "ssm-report stat" "ssm-report stat")][stat]] [[elisp:(eu-process "ssm-report geo" "ssm-report geo")][geo]]
[[elisp:(eu-process "ssm-report h1-ts" "ssm-report h1-ts")][h1-ts]]  [[elisp:(eu-process "ssm-report h1-clade" "ssm-report h1-clade")][h1-clade]]  [[elisp:(eu-process "ssm-report h1-geo" "ssm-report h1-geo")][h1-geo]]  [[elisp:(eu-process "ssm-report h1-serology" "ssm-report h1-serology")][h1-serology]]
[[elisp:(eu-process "ssm-report h3-ts" "ssm-report h3-ts")][h3-ts]]  [[elisp:(eu-process "ssm-report h3-clade" "ssm-report h3-clade")][h3-clade]]  [[elisp:(eu-process "ssm-report h3-geo" "ssm-report h3-geo")][h3-geo]]  [[elisp:(eu-process "ssm-report h3-serology" "ssm-report h3-serology")][h3-serology]]
[[elisp:(eu-process "ssm-report h3neut-ts" "ssm-report h3neut-ts")][h3neut-ts]]  [[elisp:(eu-process "ssm-report h3neut-clade" "ssm-report h3neut-clade")][h3neut-clade]]  [[elisp:(eu-process "ssm-report h3neut-geo" "ssm-report h3neut-geo")][h3neut-geo]]  [[elisp:(eu-process "ssm-report h3neut-serology" "ssm-report h3neut-serology")][h3neut-serology]]
[[elisp:(eu-process "ssm-report bv-ts" "ssm-report bv-ts")][bv-ts]]  [[elisp:(eu-process "ssm-report bv-clade" "ssm-report bv-clade")][bv-clade]]  [[elisp:(eu-process "ssm-report bv-geo" "ssm-report bv-geo")][bv-geo]]  [[elisp:(eu-process "ssm-report bv-serology" "ssm-report bv-serology")][bv-serology]]
[[elisp:(eu-process "ssm-report by-ts" "ssm-report by-ts")][by-ts]]  [[elisp:(eu-process "ssm-report by-clade" "ssm-report by-clade")][by-clade]]  [[elisp:(eu-process "ssm-report by-geo" "ssm-report by-geo")][by-geo]]  [[elisp:(eu-process "ssm-report by-serology" "ssm-report by-serology")][by-serology]]

report
sp sp-h3-cdc sp-h3neut-cdc sp-addendum
spsc spsc-h3-cdc spsc-h3neut-cdc spsc-addendum
addendum-3 addendum-4 addendum-5

[[elisp:(eu-process "ssm-report sp-bv-cdc" "ssm-report sp-bv-cdc")][sp-bv-cdc]]

* Information meeting tree
commands below make changes to tree/*.tree.settings.json and save them as tree/*.tree.information.json

ssm-report h1-tree-information
ssm-report h3-tree-information
ssm-report bv-tree-information
ssm-report by-tree-information
ssm-report h1-information
* Commands
** update hidb on albertine ~1.5min
ssh i19 "whocc-update-ace-store && whocc-hidb5-update"
hidb-get-from-albertine && cp ~/AD/data/hidb5.* db
rm -f stat/* geo/*; ssm-report --force update_hidb stat geo
ssm-report update-merges
** re-make seqdb
seqdb-create --db db/seqdb.json.xz --match-hidb --clades --report-not-aligned-prefixes 32 --save-not-found-locations /d/not-found.txt ~/ac/tables-store/sequences/*.fas.*
cp db/seqdb.json.xz ~/AD/data && rsync -v ~/AD/data/seqdb* albertine:AD/data
** make lispmds save colored by clade
acmacs-map-draw --clade --save merges/cdc-h3-neut.clade.save merges/cdc-h3-neut.ace
** serum coverage
ssm-report serumcoverage-init
ssm-report serumcircle-report-cdc-h3-hi
ssm-report h3-cov       ~4 hours!
ssm-report h3neut-cov   ~40 min
ssm-report serumcoverage-h3-hi
ssm-report serumcoverage-h3-neut
ssm-report serumcoverage-cdc-h3-hi
ssm-report report-serumcoverage
* TODO
- [ ] All [0/2]
  - [ ] geographical
  - [ ] stat
- [ ] H1 [0/5]
  - [ ] tree
  - [ ] sig pages [0/5]
    - [ ] ALL
    - [ ] CDC
    - [ ] Crick
    - [ ] NIID
    - [ ] VIDRL
  - [ ] clades [0/5]
    - [ ] ALL
    - [ ] CDC
    - [ ] Crick
    - [ ] NIID
    - [ ] VIDRL
  - [ ] ts
  - [ ] serology
- [ ] H3 HI [0/6]
  - [ ] tree
  - [ ] sig pages [0/3]
    - [ ] CDC
    - [ ] Crick
    - [ ] VIDRL
  - [ ] clades [0/3]
    - [ ] CDC
    - [ ] Crick
    - [ ] VIDRL
  - [ ] ts [0/3]
    - [ ] CDC
    - [ ] Crick
    - [ ] VIDRL
  - [ ] geography [0/3]
    - [ ] CDC
    - [ ] Crick
    - [ ] VIDRL
  - [ ] serology [0/3]
    - [ ] CDC
    - [ ] Crick
    - [ ] VIDRL
- [ ] H3 Neut [0/5]
  - [ ] sig pages [0/4]
    - [ ] CDC
    - [ ] Crick
    - [ ] NIID
    - [ ] VIDRL
  - [ ] clades [0/4]
    - [ ] CDC
    - [ ] Crick
    - [ ] NIID
    - [ ] VIDRL
  - [ ] ts [0/4]
    - [ ] CDC
    - [ ] Crick
    - [ ] NIID
    - [ ] VIDRL
  - [ ] geography [0/4]
    - [ ] CDC
    - [ ] Crick
    - [ ] NIID
    - [ ] VIDRL
  - [ ] serology [0/4]
    - [ ] CDC
    - [ ] Crick
    - [ ] NIID
    - [ ] VIDRL
- [ ] BVic [0/5]
  - [ ] tree
  - [ ] sig pages [0/4]
    - [ ] CDC
    - [ ] Crick
    - [ ] NIID
    - [ ] VIDRL
  - [ ] clades [0/4]
    - [ ] CDC
    - [ ] Crick
    - [ ] NIID
    - [ ] VIDRL
  - [ ] ts [0/4]
    - [ ] CDC
    - [ ] Crick
    - [ ] NIID
    - [ ] VIDRL
  - [ ] serology [0/4]
    - [ ] CDC
    - [ ] Crick
    - [ ] NIID
    - [ ] VIDRL
- [ ] BYam [0/5]
  - [ ] tree
  - [ ] sig pages [0/4]
    - [ ] CDC
    - [ ] Crick
    - [ ] NIID
    - [ ] VIDRL
  - [ ] clades [0/4]
    - [ ] CDC
    - [ ] Crick
    - [ ] NIID
    - [ ] VIDRL
  - [ ] ts [0/4]
    - [ ] CDC
    - [ ] Crick
    - [ ] NIID
    - [ ] VIDRL
  - [ ] serology [0/4]
    - [ ] CDC
    - [ ] Crick
    - [ ] NIID
    - [ ] VIDRL
* [[file:~/AD/sources/ssm-report/doc/report-prepare.org][report preparation doc]]
* COMMENT ====== local vars
:PROPERTIES:
:VISIBILITY: folded
:END:
#+STARTUP: showall indent
# Local Variables:
# eval: (auto-fill-mode 0)
# eval: (add-hook 'before-save-hook 'time-stamp)
# End:
